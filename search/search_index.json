{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Device API Documentation","text":"<p>Welcome to the Pirate MIDI Device API documentation. This protocol enables programmatic control and configuration of Pirate MIDI controllers through serial communication.</p>"},{"location":"#what-is-the-device-api","title":"What is the Device API?","text":"<p>The Device API is a language-agnostic protocol that allows developers to:</p> <ul> <li>Query device information - Get firmware version, hardware details, and device identity</li> <li>Read configurations - Retrieve global settings and bank/preset configurations</li> <li>Update settings - Modify device behavior, MIDI routing, and preset data</li> <li>Control functions - Navigate presets, save changes, and trigger device operations</li> </ul> <p>The protocol works over USB CDC (serial) communication using simple ASCII commands and JSON data packets.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>The Protocol Overview provides comprehensive documentation of:</p> <ul> <li>Command structure and communication flow</li> <li>Data transfer strategies for different device types</li> <li>Complete workflow examples</li> <li>Best practices and troubleshooting</li> </ul> <p>\u2192 Read the Protocol Overview</p>"},{"location":"#supported-devices","title":"Supported Devices","text":"<p>The Device API is implemented across the Pirate MIDI product line:</p> <ul> <li>Simple Devices: Scribble, CLiCK</li> <li>Bridge OS Devices: Aero, Bridge4, Bridge6, Bridge8, FlexiHub</li> </ul> <p>Each device implements the same core protocol with device-specific configuration fields and capabilities.</p>"},{"location":"#quick-example","title":"Quick Example","text":"<p>Here's a simple interaction querying device information:</p> <pre><code>Host \u2192 CHCK~\nDevice \u2192 {\"deviceModel\":\"Bridge6\",\"firmwareVersion\":\"2.1.0\",...}~\n</code></pre> <p>The protocol uses a multi-step approach where each command is sent separately and the device responds after each step.</p>"},{"location":"#use-cases","title":"Use Cases","text":"<ul> <li>Custom Editors: Build specialized configuration tools for specific workflows</li> <li>Integration: Connect Pirate MIDI devices with DAWs, show control systems, or custom rigs</li> <li>Automation: Programmatically manage large preset libraries or configuration backups</li> <li>Development: Create third-party applications and utilities for Pirate MIDI hardware</li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<ul> <li>Protocol Overview - Complete protocol specification, commands, and examples</li> <li>Device-Specific References - Detailed configuration schemas for each device model (coming soon)</li> </ul>"},{"location":"#need-help","title":"Need Help?","text":"<ul> <li>Check the troubleshooting section in the overview</li> <li>Review the complete workflow examples</li> <li>Visit the Pirate MIDI support page</li> </ul> <p>Ready to dive in? Start with the Protocol Overview to learn the complete Device API specification.</p>"},{"location":"device-api/","title":"Device API Protocol","text":""},{"location":"device-api/#overview","title":"Overview","text":"<p>The Device API is a protocol used by Pirate MIDI devices that allows for control of the device and configuration exchange to and from the device using the Pirate MIDI web editor or custom applications.</p> <p>The protocol is language-agnostic and relies solely on serial port communication using ASCII characters. Any programming language or platform that can open a serial port and send/receive text data can communicate with Pirate MIDI devices.</p>"},{"location":"device-api/#transport-methods","title":"Transport Methods","text":"<p>The Device API currently supports communication via:</p> <ul> <li>CDC Interface (ASCII characters over USB Serial)</li> <li>MIDI System Exclusive (planned) - ASCII data wrapped inside SysEx packets</li> </ul>"},{"location":"device-api/#data-size-limits-and-transfer-strategies","title":"Data Size Limits and Transfer Strategies","text":""},{"location":"device-api/#simple-devices-scribble-click","title":"Simple Devices (Scribble, CLiCK)","text":"<p>Simple devices have smaller configuration structures and can handle complete bank transfers in a single operation. An entire <code>bankSettings</code> packet can be sent without concern for memory overflow.</p>"},{"location":"device-api/#complex-devices-bridge-os-aero-bridge4-bridge6-bridge8-flexihub","title":"Complex Devices (Bridge OS: Aero, Bridge4, Bridge6, Bridge8, FlexiHub)","text":"<p>Bridge OS devices have significantly larger <code>bankSettings</code> structures due to their extensive footswitch configurations, message stacks, and advanced features. Sending an entire bank configuration in a single transfer may overflow the device's receiving memory buffer, causing the transfer to fail or corrupt data.</p>"},{"location":"device-api/#recommended-transfer-strategy-for-bridge-os-devices","title":"Recommended Transfer Strategy for Bridge OS Devices","text":"<p>Step 1: Send Non-Footswitch Settings</p> <p>First, send all bank-level settings excluding the footswitches array:</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"bankId\":1820074671,\"bankName\":\"Lead Patch\",\"midiClocks\":[...],\"bankMessages\":{...},...}~\nDevice \u2192 ok~\n</code></pre> <p>Step 2: Send Each Footswitch Individually</p> <p>Send each footswitch as a separate transfer, in numerical order (footswitch 0, then 1, then 2, etc.):</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"footswitches\":[{\"name\":\"FS 1\",\"primaryMode\":\"toggle\",...}]}~\nDevice \u2192 ok~\n</code></pre> <p>Then for footswitch 1:</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"footswitches\":[{},{\"name\":\"FS 2\",\"primaryMode\":\"press\",...}]}~\nDevice \u2192 ok~\n</code></pre> <p>Important Rules:</p> <ol> <li>Send footswitches in numerical order (0, 1, 2, 3, etc.)</li> <li>Include preceding footswitch entries as empty objects: When sending footswitch 2, include two empty objects <code>[{},{}]</code> before the actual footswitch 2 data</li> <li>Do not include following footswitches: When sending footswitch 2, do not include data for footswitches 3, 4, 5, etc.</li> <li>Each footswitch is a complete transfer: Each footswitch should contain all its configuration (modes, colors, message stacks, etc.)</li> </ol>"},{"location":"device-api/#example-sending-footswitch-2-on-a-bridge6","title":"Example: Sending Footswitch 2 on a Bridge6","text":"<pre><code>{\n  \"footswitches\": [\n    {},\n    {},\n    {\n      \"name\": \"FS 3\",\n      \"primaryMode\": \"toggle\",\n      \"primaryColor\": 16711680,\n      \"toggleOnMessages\": {\n        \"numMessages\": 1,\n        \"messages\": [...]\n      },\n      \"toggleOffMessages\": {...},\n      \"pressMessages\": {...}\n    }\n  ]\n}\n</code></pre> <p>The device will parse this, recognize it's updating footswitch index 2, and merge it with the existing bank configuration while ignoring the empty objects at indices 0 and 1.</p>"},{"location":"device-api/#why-do-this","title":"Why Do This?","text":"<p>The device's JSON parser can handle partial configurations by merging incoming data with existing settings. When you send only a <code>footswitches</code> array with sparse entries, the device:</p> <ol> <li>Identifies which footswitch index is being updated (based on position in array)</li> <li>Merges that footswitch's complete configuration</li> <li>Ignores empty objects and missing fields</li> <li>Preserves all other existing bank data</li> </ol> <p>This strategy keeps individual transfer sizes manageable while allowing complex configurations to be sent reliably.</p>"},{"location":"device-api/#protocol-structure","title":"Protocol Structure","text":"<p>All communication follows a consistent structure designed for efficient, reliable data exchange.</p>"},{"location":"device-api/#command-format","title":"Command Format","text":"<p>Each command is sent as a separate packet:</p> <pre><code>[COMMAND]~\n</code></pre> <ul> <li>Command: 4 uppercase letters identifying the operation</li> <li>Terminator: <code>~</code> character signifying end of transmission</li> <li>Each command must be sent separately and the host must wait for the device response before sending the next command</li> </ul> <p>Important: The host must send only the command or data followed by the <code>~</code> terminator. Do not send any additional characters such as carriage returns (<code>\\r</code>), line feeds (<code>\\n</code>), or any other whitespace after the terminator. The <code>~</code> character marks the complete end of the packet.</p>"},{"location":"device-api/#text-formatting","title":"Text Formatting","text":"<ul> <li>Command identifiers use UPPERCASE</li> <li>JSON keys use camelCase formatting</li> <li>JSON payloads are minimized (no extra whitespace)</li> </ul>"},{"location":"device-api/#response-handling","title":"Response Handling","text":"<p>The device will always provide a response to each command sent by the host:</p> <ul> <li><code>ok~</code> - Command was received and processed successfully</li> <li><code>[jsonData]~</code> - The requested data (for DREQ and CHCK commands)</li> </ul> <p>The host must wait for the device response before sending the next command in the sequence.</p>"},{"location":"device-api/#commands","title":"Commands","text":"<p>The Device API supports four primary command types:</p> Command Name Description <code>CHCK</code> Check Retrieves device properties (firmware version, device name, hardware version, unique ID, etc.) <code>DREQ</code> Data Request Requests configuration data from the device <code>DTXR</code> Data Transfer Sends configuration data to the device <code>CTRL</code> Control Controls device functions (bootloader, preset navigation, reset, etc.)"},{"location":"device-api/#communication-flow","title":"Communication Flow","text":""},{"location":"device-api/#1-device-information-query-chck","title":"1. Device Information Query (CHCK)","text":"<p>The CHCK command queries basic device information.</p> <p>Host sends:</p> <pre><code>CHCK~\n</code></pre> <p>Device responds with JSON data:</p> <pre><code>{\"deviceModel\":\"Bridge6\",\"firmwareVersion\":\"2.1.0\",\"hardwareVersion\":\"1.1.3\",\"deviceName\":\"Bridge 6\",\"uId\":5,\"profileId\":0}~\n</code></pre> <p>Note: This example shows data from a Bridge6 device. All devices return similar fields, though some field names or additional fields may vary by device model.</p>"},{"location":"device-api/#2-requesting-data-dreq","title":"2. Requesting Data (DREQ)","text":"<p>The DREQ command requests configuration data from the device. This is a multi-step process where each packet is sent separately.</p>"},{"location":"device-api/#data-types","title":"Data Types","text":"<ul> <li><code>globalSettings</code> - Device-wide configuration</li> <li><code>bankSettings</code> - Preset/bank configuration (requires bank index parameter)</li> </ul>"},{"location":"device-api/#requesting-global-settings","title":"Requesting Global Settings","text":"<p>Step 1 - Host sends command:</p> <pre><code>DREQ~\n</code></pre> <p>Step 1 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 2 - Host sends data type:</p> <pre><code>globalSettings~\n</code></pre> <p>Step 2 - Device responds with configuration data:</p> <pre><code>{\"currentBank\":0,\"midiChannel\":0,\"ledBrightness\":66,\"uiMode\":\"extended\",\"holdTime\":1000,\"deviceName\":\"Bridge 6\",\"profileId\":0,...}~\n</code></pre> <p>Note: This example shows abbreviated data from a Bridge6 device. Actual responses contain many more fields depending on device capabilities. The structure and field names vary by device model.</p>"},{"location":"device-api/#requesting-bank-settings","title":"Requesting Bank Settings","text":"<p>Step 1 - Host sends command:</p> <pre><code>DREQ~\n</code></pre> <p>Step 1 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 2 - Host sends data type with bank index:</p> <pre><code>bankSettings,0~\n</code></pre> <p>(Where <code>0</code> is the zero-indexed bank number: 0-127)</p> <p>Step 2 - Device responds with bank configuration data:</p> <pre><code>{\"bankName\":\"New Bank\",\"bankId\":1820074671,\"midiClocks\":[{\"tempo\":0},{\"tempo\":0}],\"bankMessages\":{\"numMessages\":0,\"messages\":[]},...}~\n</code></pre> <p>Note: This example shows abbreviated data from a Bridge6 device. Actual bank responses contain significantly more data including footswitch configurations, message stacks, and device-specific features. The structure varies by device model.</p>"},{"location":"device-api/#3-transferring-data-dtxr","title":"3. Transferring Data (DTXR)","text":"<p>The DTXR command sends configuration data to the device. This is a multi-step process where each packet is sent separately.</p>"},{"location":"device-api/#transferring-global-settings","title":"Transferring Global Settings","text":"<p>Step 1 - Host sends command:</p> <pre><code>DTXR~\n</code></pre> <p>Step 1 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 2 - Host sends data type:</p> <pre><code>globalSettings~\n</code></pre> <p>Step 2 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 3 - Host sends JSON configuration:</p> <pre><code>{\"deviceName\":\"My Bridge\",\"midiChannel\":5}~\n</code></pre> <p>Step 3 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Note: You can send partial configurations containing only the fields you wish to update. However, as noted in the \"Complete Workflow Examples\" section below, this is not recommended. Best practice is to retrieve the current settings via DREQ, modify the fields you need to change, and send the complete configuration back.</p>"},{"location":"device-api/#transferring-bank-settings","title":"Transferring Bank Settings","text":"<p>Step 1 - Host sends command:</p> <pre><code>DTXR~\n</code></pre> <p>Step 1 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 2 - Host sends data type with bank index:</p> <pre><code>bankSettings,0~\n</code></pre> <p>(Where <code>0</code> is the zero-indexed bank number: 0-127)</p> <p>Step 2 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 3 - Host sends JSON configuration:</p> <pre><code>{\"bankId\":1820074671,\"bankName\":\"Lead Patch\"}~\n</code></pre> <p>Step 3 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Note: More complex devices such as Bridge OS controllers (Bridge4, Bridge6, Bridge8, etc.) automatically save bank data when received via DTXR. For these devices, the <code>savePresets</code> CTRL command may not be available or necessary. Simpler devices like the Scribble require explicit saving using <code>savePresets</code>. Check device-specific documentation for save behavior.</p>"},{"location":"device-api/#4-control-commands-ctrl","title":"4. Control Commands (CTRL)","text":"<p>The CTRL command executes device functions. This is a two-step process.</p> <p>Step 1 - Host sends command:</p> <pre><code>CTRL~\n</code></pre> <p>Step 1 - Device responds:</p> <pre><code>ok~\n</code></pre> <p>Step 2 - Host sends JSON payload:</p> <pre><code>{\"command\":[\"restart\"]}~\n</code></pre> <p>Step 2 - Device responds:</p> <pre><code>ok~\n</code></pre>"},{"location":"device-api/#control-command-examples","title":"Control Command Examples","text":"<p>Single command:</p> <pre><code>Host \u2192 CTRL~\nDevice \u2192 ok~\nHost \u2192 {\"command\":[\"bankUp\"]}~\nDevice \u2192 ok~\n</code></pre> <p>Multiple commands (executed in order):</p> <pre><code>Host \u2192 CTRL~\nDevice \u2192 ok~\nHost \u2192 {\"command\":[\"bankUp\",\"savePresets\"]}~\nDevice \u2192 ok~\n</code></pre> <p>Command with parameter:</p> <pre><code>Host \u2192 CTRL~\nDevice \u2192 ok~\nHost \u2192 {\"command\":[{\"goToBank\":5}]}~\nDevice \u2192 ok~\n</code></pre>"},{"location":"device-api/#banks-vs-presets-terminology","title":"Banks vs. Presets Terminology","text":"<p>The terms \"bank\" and \"preset\" are often used interchangeably in MIDI terminology, both referring to stored configurations that can be recalled via MIDI Program Change messages.</p> <p>Important terminology notes:</p> <ul> <li>When using DREQ or DTXR commands, always use <code>bankSettings</code> regardless of the device</li> <li>The term <code>bankSettings</code> is the standardized API term across all Pirate MIDI devices</li> <li>Some devices (like the Scribble) use the term \"presets\" in their user interface and certain CTRL commands (e.g., <code>savePresets</code>)</li> <li>Both terms refer to the same concept: a stored configuration that represents a MIDI Program Change location</li> <li>Bank/preset numbers are zero-indexed (0-127) in the API, even though they may be displayed as 1-128 in the user interface</li> </ul> <p>Examples: - API command: <code>bankSettings,0</code> refers to what users might call \"Preset 1\" - CTRL command: <code>savePresets</code> saves all banks/presets to flash memory - User interface: May display \"Preset 5\" for what the API calls <code>bankSettings,4</code></p>"},{"location":"device-api/#data-scope","title":"Data Scope","text":""},{"location":"device-api/#global-settings","title":"Global Settings","text":"<p>Device-wide configuration that applies across all presets/banks:</p> <ul> <li>MIDI channels and routing</li> <li>Display settings (brightness, colors, light mode)</li> <li>Wireless configuration (BLE/WiFi)</li> <li>Global switch behaviors</li> <li>MIDI clock settings</li> <li>MIDI thru routing</li> <li>Current active bank/preset</li> </ul>"},{"location":"device-api/#bank-settings","title":"Bank Settings","text":"<p>Preset-specific configuration (up to 128 banks per device, indexed 0-127):</p> <ul> <li>Bank/preset name and display text</li> <li>Color overrides</li> <li>BPM (beats per minute)</li> <li>Switch messages (press and hold actions)</li> <li>Custom MIDI messages</li> <li>Preset recall messages</li> </ul>"},{"location":"device-api/#complete-workflow-examples","title":"Complete Workflow Examples","text":"<p>Important Note on Partial Configurations:</p> <p>While partial configuration packets (such as sending only <code>{\"bankName\":\"New Name\"}</code> for a <code>bankSettings</code> transfer) may work in some cases, and the device should ignore non-referenced keys, this approach is not recommended due to the large number of possible permutations and device-specific behaviors.</p> <p>Sending partial configurations may result in: - Malformed configurations on the device - Unexpected behavior or missing settings - Inconsistent state across different firmware versions - Silent failures where some fields are not updated</p> <p>Best Practice: Always send as much data as possible when transferring configurations, respecting the data size limits mentioned in the \"Data Size Limits and Transfer Strategies\" section above. For Bridge OS devices, follow the recommended strategy of: 1. Sending complete non-footswitch bank settings first 2. Sending each footswitch individually with complete footswitch data</p> <p>This ensures reliable, predictable behavior across all device models and firmware versions.</p>"},{"location":"device-api/#example-1-query-device-information","title":"Example 1: Query Device Information","text":"<pre><code>Host \u2192 CHCK~\nDevice \u2192 {\"deviceModel\":\"Bridge6\",\"firmwareVersion\":\"2.1.0\",\"hardwareVersion\":\"1.1.3\",\"deviceName\":\"Bridge 6\",\"uId\":5,\"profileId\":0}~\n</code></pre>"},{"location":"device-api/#example-2-read-global-settings","title":"Example 2: Read Global Settings","text":"<pre><code>Host \u2192 DREQ~\nDevice \u2192 ok~\nHost \u2192 globalSettings~\nDevice \u2192 {\"currentBank\":0,\"midiChannel\":0,\"ledBrightness\":66,\"uiMode\":\"extended\",\"holdTime\":1000,\"deviceName\":\"Bridge 6\",\"profileId\":0,...}~\n</code></pre>"},{"location":"device-api/#example-3-read-bank-5-settings","title":"Example 3: Read Bank 5 Settings","text":"<pre><code>Host \u2192 DREQ~\nDevice \u2192 ok~\nHost \u2192 bankSettings,5~\nDevice \u2192 {\"bankName\":\"New Bank\",\"bankId\":1820074671,\"midiClocks\":[{\"tempo\":0},{\"tempo\":0}],\"bankMessages\":{\"numMessages\":0,\"messages\":[]},...}~\n</code></pre>"},{"location":"device-api/#example-4-update-global-settings","title":"Example 4: Update Global Settings","text":"<pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 globalSettings~\nDevice \u2192 ok~\nHost \u2192 {\"deviceName\":\"Studio Controller\",\"midiChannel\":10,\"ledBrightness\":75,\"holdTime\":1000}~\nDevice \u2192 ok~\n</code></pre> <p>Note: While this example shows only a few fields being updated, best practice is to send the complete global settings object you retrieved via DREQ, with your modifications applied.</p>"},{"location":"device-api/#example-5-update-bank-name-simple-device","title":"Example 5: Update Bank Name (Simple Device)","text":"<pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"bankId\":1820074671,\"bankName\":\"Intro Song\",\"midiClocks\":[...],...}~\nDevice \u2192 ok~\n</code></pre> <p>Note: For simple devices, send the complete bank configuration with your changes. For Bridge OS devices, see Example 8 for the recommended footswitch transfer strategy.</p>"},{"location":"device-api/#example-6-navigate-to-bank-10","title":"Example 6: Navigate to Bank 10","text":"<pre><code>Host \u2192 CTRL~\nDevice \u2192 ok~\nHost \u2192 {\"command\":[{\"goToBank\":10}]}~\nDevice \u2192 ok~\n</code></pre>"},{"location":"device-api/#example-7-save-all-banks-and-restart","title":"Example 7: Save All Banks and Restart","text":"<pre><code>Host \u2192 CTRL~\nDevice \u2192 ok~\nHost \u2192 {\"command\":[\"savePresets\",\"restart\"]}~\nDevice \u2192 ok~\n</code></pre> <p>Note: The <code>savePresets</code> command is device-dependent. Bridge OS controllers (Bridge4, Bridge6, Bridge8, etc.) automatically save bank data and may not implement this command. Simpler devices like the Scribble require this command to persist changes to flash memory. If your device returns an error or doesn't recognize <code>savePresets</code>, it likely saves automatically.</p>"},{"location":"device-api/#example-8-update-footswitch-on-bridge-os-device","title":"Example 8: Update Footswitch on Bridge OS Device","text":"<p>Step 1: Send non-footswitch bank settings</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"bankId\":1820074671,\"bankName\":\"Lead Patch\",\"midiClocks\":[{\"tempo\":120},{\"tempo\":0}],\"bankMessages\":{\"numMessages\":0,\"messages\":[]},...}~\nDevice \u2192 ok~\n</code></pre> <p>Step 2: Send footswitch 0</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"footswitches\":[{\"name\":\"FS 1\",\"primaryMode\":\"toggle\",\"primaryColor\":16711680,\"toggleOnMessages\":{...},\"toggleOffMessages\":{...},...}]}~\nDevice \u2192 ok~\n</code></pre> <p>Step 3: Send footswitch 1</p> <pre><code>Host \u2192 DTXR~\nDevice \u2192 ok~\nHost \u2192 bankSettings,0~\nDevice \u2192 ok~\nHost \u2192 {\"footswitches\":[{},{\"name\":\"FS 2\",\"primaryMode\":\"press\",\"primaryColor\":65280,\"pressMessages\":{...},...}]}~\nDevice \u2192 ok~\n</code></pre> <p>Note: Notice how footswitch 1 includes an empty object <code>{}</code> before its data to indicate the correct array position. This pattern continues for each subsequent footswitch.</p>"},{"location":"device-api/#best-practices","title":"Best Practices","text":""},{"location":"device-api/#communication-timing","title":"Communication Timing","text":"<ol> <li>Always wait for device response before sending the next command</li> <li>Process responses in order - the device executes commands sequentially</li> <li>Allow adequate time for flash memory operations (especially after <code>savePresets</code>)</li> <li>Implement timeout detection (recommended: 1-5 seconds per command)</li> </ol>"},{"location":"device-api/#command-sequencing","title":"Command Sequencing","text":"<p>For DREQ and DTXR commands: 1. Send the command (<code>DREQ~</code> or <code>DTXR~</code>) 2. Wait for <code>ok~</code> 3. Send the data type (e.g., <code>globalSettings~</code> or <code>bankSettings,5~</code>) 4. Wait for response (<code>ok~</code> or configuration data) 5. For DTXR only: Send the JSON configuration 6. Wait for final <code>ok~</code></p> <p>For CTRL commands: 1. Send the command (<code>CTRL~</code>) 2. Wait for <code>ok~</code> 3. Send the JSON payload (e.g., <code>{\"command\":[\"restart\"]}~</code>) 4. Wait for final <code>ok~</code></p>"},{"location":"device-api/#data-validation","title":"Data Validation","text":"<ol> <li>Validate JSON structure before sending (proper syntax, no trailing commas)</li> <li>Ensure all required fields are present for each data type</li> <li>Check value ranges match device capabilities</li> <li>Use proper camelCase formatting for all JSON keys</li> <li>Minimize JSON (remove unnecessary whitespace)</li> </ol>"},{"location":"device-api/#error-handling","title":"Error Handling","text":"<ol> <li>Implement timeout detection - if no response is received within a reasonable time (1-5 seconds), the connection may be lost</li> <li>Validate that responses are either <code>ok~</code> or valid JSON followed by <code>~</code></li> <li>Handle unexpected responses gracefully</li> <li>Log all communication for debugging purposes</li> <li>If a command fails, do not proceed with dependent commands</li> </ol>"},{"location":"device-api/#session-management","title":"Session Management","text":"<ol> <li>Start each session with a <code>CHCK~</code> command to verify connection and device identity</li> <li>Read current settings (<code>DREQ</code>) before making modifications</li> <li>After updating multiple banks on devices that require manual saving (e.g., Scribble), use <code>CTRL{\"command\":[\"savePresets\"]}~</code> to persist changes. Bridge OS devices (Bridge4, Bridge6, Bridge8, etc.) automatically save bank data.</li> <li>For critical changes, verify by reading back the configuration</li> <li>Close the serial port cleanly when finished</li> </ol>"},{"location":"device-api/#serial-port-configuration","title":"Serial Port Configuration","text":"<p>Typical settings for CDC interface: - Baud Rate: 115200 (device-specific, check documentation) - Data Bits: 8 - Parity: None - Stop Bits: 1 - Flow Control: None</p>"},{"location":"device-api/#json-schema","title":"JSON Schema","text":"<p>Each device has a specific JSON schema defining:</p> <ul> <li>Available configuration keys</li> <li>Value types and constraints</li> <li>Enumerated options for string fields</li> <li>Nested structure for complex settings</li> <li>Required vs. optional fields</li> </ul> <p>Device-specific schemas are documented in their respective sections.</p>"},{"location":"device-api/#device-specific-documentation","title":"Device-Specific Documentation","text":"<p>For detailed information about specific devices, including complete JSON schemas and configuration options, see:</p> <ul> <li>todo</li> <li>(Additional devices will be listed here)</li> </ul>"},{"location":"device-api/#troubleshooting","title":"Troubleshooting","text":""},{"location":"device-api/#common-issues","title":"Common Issues","text":"<p>No response from device: - Verify serial port is open and configured correctly - Check that baud rate matches device specification (typically 115200) - Ensure <code>~</code> terminator is included in every transmission - Confirm USB cable supports data (not just power) - Try a different USB port</p> <p>Unexpected responses: - Verify command syntax is correct (case-sensitive) - Check that you're waiting for each response before sending next command - Ensure JSON is valid and properly formatted - Verify you're using the correct data type names</p> <p>Settings not persisting: - For devices that require manual saving (e.g., Scribble), use <code>CTRL{\"command\":[\"savePresets\"]}~</code> after making changes - Bridge OS devices (Bridge4, Bridge6, Bridge8, etc.) automatically save bank data when received - Wait for <code>ok~</code> response before disconnecting - Check that device has sufficient flash memory available - Verify the device didn't restart unexpectedly</p> <p>Bank/preset confusion: - Remember: API uses zero-indexed banks (0-127) - UI might display as 1-128 - Always use <code>bankSettings</code> in API commands, regardless of device</p>"},{"location":"device-api/#version-history","title":"Version History","text":"<ul> <li>v1.0 - Initial CDC interface implementation</li> <li>Future - MIDI SysEx wrapper support planned</li> </ul>"}]}